<?xml version="1.0" encoding="utf-16"?>
<DesiredConfigurationDigest xmlns="http://schemas.microsoft.com/SystemsCenterConfigurationManager/2009/07/10/DesiredConfiguration">
  <!--Authored against the following schema version: 5-->
  <Application AuthoringScopeId="ScopeId_B970F417-6097-4CEE-91D6-94598E897240" LogicalName="LogicalName_26357653-64b6-45e6-8e65-7f73a5f9dd5a" Version="6" Is64Bit="false">
    <Annotation xmlns="http://schemas.microsoft.com/SystemsCenterConfigurationManager/2009/06/14/Rules">
      <DisplayName Text="CI-Validate-HINV-MaxMIFSize" ResourceId="ID-e5a3f89c-7e6c-424c-8c17-5cf379b5e7be" />
      <Description Text="Source: https://github.com/jonasatgit/scriptrepo &#xA;This item will validate the Max MIF Size setting of the DataLoader. The default value should be 5000000 (5MB) but it might be neccessary to increase the value to import larger Hardware Inventory files. Check: &quot;\inboxes\auth\dataldr.box\BADMIFS&quot; for larger files." ResourceId="ID-06a98e21-b682-4e1e-b014-00f57e41fda1" />
    </Annotation>
    <Parts>
      <SuppressionReferences />
    </Parts>
    <Settings>
      <RootComplexSetting>
        <SimpleSetting LogicalName="RegSetting_ab9f01b7-631a-4fe3-bb8f-38e8a3365d02" DataType="Int64">
          <Annotation xmlns="http://schemas.microsoft.com/SystemsCenterConfigurationManager/2009/06/14/Rules">
            <DisplayName Text="SMSInventoryDataLoader-MaxMIFSize" ResourceId="ID-65b9926c-e435-43c4-80b3-1c50c0a0aa40" />
            <Description Text="https://docs.microsoft.com/en-us/mem/configmgr/core/clients/manage/inventory/extend-hardware-inventory" ResourceId="ID-01690e08-42f4-4eaf-b741-9d3c9b474309" />
          </Annotation>
          <RegistryDiscoverySource Hive="HKEY_LOCAL_MACHINE" Depth="Base" Is64Bit="false" CreateMissingPath="true">
            <Key>SOFTWARE\Microsoft\SMS\COMPONENTS\SMS_INVENTORY_DATA_LOADER</Key>
            <ValueName>Max MIF Size</ValueName>
          </RegistryDiscoverySource>
        </SimpleSetting>
      </RootComplexSetting>
    </Settings>
    <Rules>
      <Rule xmlns="http://schemas.microsoft.com/SystemsCenterConfigurationManager/2009/06/14/Rules" id="Rule_507a8218-3bbf-4834-8167-0da66c923664" Severity="Critical" NonCompliantWhenSettingIsNotFound="false">
        <Annotation>
          <DisplayName Text="Max MIF Size" ResourceId="ID-32fc7ec7-279c-4de7-8509-bceec6124008" />
          <Description Text="" />
        </Annotation>
        <Expression>
          <Operator>Equals</Operator>
          <Operands>
            <SettingReference AuthoringScopeId="ScopeId_B970F417-6097-4CEE-91D6-94598E897240" LogicalName="LogicalName_26357653-64b6-45e6-8e65-7f73a5f9dd5a" Version="6" DataType="Int64" SettingLogicalName="RegSetting_ab9f01b7-631a-4fe3-bb8f-38e8a3365d02" SettingSourceType="Registry" Method="Value" Changeable="false" />
            <ConstantValue Value="5000000" DataType="Int64" />
          </Operands>
        </Expression>
      </Rule>
    </Rules>
    <PlatformApplicabilityCondition xmlns="http://schemas.microsoft.com/SystemsCenterConfigurationManager/2009/06/14/Rules">
      <OperatingSystemExpression>
        <Operator>OneOf</Operator>
        <Operands>
          <RuleExpression RuleId="Windows/All_Windows_Client_Server" />
        </Operands>
      </OperatingSystemExpression>
    </PlatformApplicabilityCondition>
    <ScriptDiscoveryInfo ScriptType="PowerShell">
      <Script># Evaluate only if SMS_INVENTORY_DATA_LOADER is present on machine
if (Test-Path 'HKLM:\SOFTWARE\Microsoft\SMS\COMPONENTS\SMS_INVENTORY_DATA_LOADER')
{
    Write-Output 'Detected'
}</Script>
    </ScriptDiscoveryInfo>
  </Application>
</DesiredConfigurationDigest>