<sequence version="3.10"><referenceList><reference package="OPC005ED"/></referenceList><group name="Prepare for Upgrade" description="Actions to run in full OS to prepare for upgrade of the operating system."><step type="SMS_TaskSequence_PrestartCheckAction" name="Check Readiness for Upgrade" description="Check whether the computer is ready for the upgrade of the operating system." runIn="WinPEandFullOS" successCodeList="0" retryCount="0" runFromNet="false"><action>OSDPrestartCheck.exe </action><defaultVarList><variable name="OSDCheckCMClientMinVersion" property="CheckCMClientMinVersion">false</variable><variable name="OSDCheckDeviceUEFI" property="CheckDeviceUEFI">false</variable><variable name="OSDCheckFreeDiskSpace" property="CheckFreeDiskSpace">true</variable><variable name="OSDCheckMaxOsVersion" property="CheckMaxOSVersion">false</variable><variable name="OSDCheckMemory" property="CheckMemory">true</variable><variable name="OSDCheckMinOSVersion" property="CheckMinOSVersion">false</variable><variable name="OSDCheckNetworkConnected" property="CheckNetworkConnected">false</variable><variable name="OSDCheckNetworkWired" property="CheckNetworkWired">false</variable><variable name="OSDCheckOSArchitecture" property="CheckOSArchitecture">false</variable><variable name="OSDCheckOSLanguageID" property="CheckOSLanguageID">false</variable><variable name="OSDCheckOSType" property="CheckOSType">true</variable><variable name="OSDCheckPowerState" property="CheckPowerState">false</variable><variable name="OSDCheckProcessorSpeed" property="CheckProcessorSpeed">true</variable><variable name="OSDFreeDiskSpace" property="FreeDiskSpace">25600</variable><variable name="OSDMemory" property="Memory">2048</variable><variable name="OSDOSArchitecture" property="OSArchitecture">64</variable><variable name="OSDOSLanguageID" property="OSLanguageID">1033</variable><variable name="OSDOSType" property="OSType">CLIENT</variable><variable name="OSDProcessorSpeed" property="ProcessorSpeed">1024</variable></defaultVarList></step><group name="Battery Checks" description="Add steps in this group to check whether the computer is using battery, or wired power"/><group name="Network/Wired Connection Checks" description="Add steps in this group to check whether the computer is connected to a network, and is not using a wireless connection"/><group name="Remove incompatible applications" description="Add steps in this group to remove any applications that are incompatible with this version of Windows 10"/><group name="Remove incompatible drivers" description="Add steps in this group to remove any drivers that are incompatible with this version of Windows 10"/><group name="Remove/suspend third-party security" description="Add steps in this group to remove or suspend third-party security programs, such as antivirus"/></group><group name="Upgrade the Operating System" description=""><step type="SMS_TaskSequence_UpgradeOperatingSystemAction" name="Upgrade Operating System" description="" runIn="FullOS" successCodeList="0" retryCount="0" runFromNet="false"><action>OSDUpgradeOS.exe </action><defaultVarList><variable name="OSDUpgradeDynamicUpdateSettings" property="DynamicUpdateSettings">Disable</variable><variable name="OSDUpgradeIgnoreMessages" property="IgnoreMessages">false</variable><variable name="OSDUpgradeInstallEditionIndex" property="InstallEditionIndex">1</variable><variable name="OSDUpgradeInstallPackageID" property="InstallPackageID">OPC005ED</variable><variable name="OSDUpgradeOsProductKey" property="OsProductKey"></variable><variable name="OSDUpgradePreserveSettings" property="PreserveSettings">Upgrade</variable><variable name="OSDUpgradeScanOnly" property="ScanOnly">false</variable></defaultVarList></step><step type="SMS_TaskSequence_RebootAction" name="Restart Computer" description="" runIn="WinPEandFullOS" successCodeList="0" retryCount="0" runFromNet="false"><action>smsboot.exe /target:HD</action><defaultVarList><variable name="SMSRebootMessage" property="Message">Microsoft Windows operating system is being upgraded. The computer must reboot to continue.</variable><variable name="SMSRebootTimeout" property="MessageTimeout">10</variable><variable name="SMSRebootTarget" property="Target" hidden="true">HD</variable></defaultVarList></step></group><group name="Post-Processing" description="Run tasks after the operating system upgrades and the computer restarts"><condition><expression type="SMS_TaskSequence_VariableConditionExpression"><variable name="Operator">equals</variable><variable name="Value">false</variable><variable name="Variable">_SMSTSSetupRollback</variable></expression></condition><group name="Apply setup-based drivers" description="Add steps in this group to install setup-based drivers (.exe) from packages"/><group name="Install/enable third-party security" description="Add steps in this group to install or enable third-party security programs, such as antivirus"/><group name="Set Windows default apps and associations" description="Add steps in this group to set Windows default apps and file associations"/><group name="Apply customizations and personalizations" description="Add steps in this group to apply Start menu customizations, such as organizing program groups"/></group><group name="Rollback" description="Run tasks if the upgrade fails and the operating system rolls back"><condition><expression type="SMS_TaskSequence_VariableConditionExpression"><variable name="Operator">equals</variable><variable name="Value">true</variable><variable name="Variable">_SMSTSSetupRollback</variable></expression></condition></group><group name="Run Actions on Failure" description="Run tasks if OS upgrade fails to gather logs and run diagnostic tools"><condition><expression type="SMS_TaskSequence_VariableConditionExpression"><variable name="Operator">notequals</variable><variable name="Value">0</variable><variable name="Variable">_SMSTSOSUpgradeActionReturnCode</variable></expression></condition><group name="Collect Logs" description="Save Windows Setup and Task Sequence logs to a Network Share"/><group name="Run Diagnostic Tools" description="Run Diagnostic Tools"/></group></sequence>
